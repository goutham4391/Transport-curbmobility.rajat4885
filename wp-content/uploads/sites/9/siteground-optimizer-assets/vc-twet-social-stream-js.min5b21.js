var sv,si,social_dataa;typeof Object.create!='function'&&(Object.create=function(b){function a(){}return a.prototype=b,new a});function svc_twit_megnific_script(){jQuery('span.svc_twit_photo').magnificPopup({type:'image',closeBtnInside:!1,mainClass:'ssocial-popup-close'}),jQuery('span.svc_twit_video').magnificPopup({type:'ajax',mainClass:'ssocial-popup-close',closeBtnInside:!1,closeOnBgClick:!1})}function intToString_counter(a){var d=["","k","m","b","t"],b=Math.floor((""+a).length/4),c=parseFloat((b!=0?a/Math.pow(1e3,b):a).toPrecision(2)),e;return c%1!=0&&(e=c.toFixed(1)),c+d[b]}sv=0,si=0,social_dataa='',function(a,c,d,b){a.fn.svc_twitt_social_stream=function(h){var k={plugin_folder:'',template:'template.html',show_media:!1,hide_like:!1,media_min_width:300,length:150,effect:'',insta_access_token:'',grid_columns_count_for_desktop:'',grid_columns_count_for_tablet:'',grid_columns_count_for_mobile:'',popup:'',on_cache:'',cache_time:'',cache_id:'',stream_id:''},c,f,l,i,e,d;moment.locale('en'),console.log(svc_ajax_url.laungage),moment.locale(svc_ajax_url.laungage),c=a.extend(k,h),f=a(this),i=['twitter'];function j(a){var b=!0;b&&c.callback&&(c.callback(a),svc_twit_megnific_script(),social_dataa='')}e={request:function(b,c){a.ajax({url:b,dataType:'jsonp',success:c})},request_json:function(b,c){a.ajax({url:b,dataType:'json',success:c})},get_request:function(b,c){a.get(b,c,'json')},wrapLinks:function(a,c){var b=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;return a=a.replace(b,e.wrapLinkTemplate),a=a.replace(/(^|\s)#(\w+)/g,e.wrapTwitterTagTemplate),a=a.replace(/(^|\s)@(\w+)/g,e.wrapTwitterUserTemplate),a},wrapLinkTemplate:function(a){return'<a target="_blank" href="'+a+'">'+a+'</a>'},wrapTwitterTagTemplate:function(a){return'<a target="_blank" href="https://twitter.com/hashtag/'+a.trim().slice(1)+'" class="twit_hashtag">'+a+'</a>'},wrapTwitterUserTemplate:function(a){return'<a target="_blank" href="https://twitter.com/'+a.trim().slice(1)+'" class="twit_hashtag">'+a+'</a>'},shorten:function(b){return b=a.trim(b),b.length>c.length?jQuery.trim(b).substring(0,c.length).split(" ").slice(0,-1).join(" ")+"...":b},stripHTML:function(a){return typeof a=="undefined"||a===null?'':a.replace(/(<([^>]+)>)|nbsp;|\s{2,}|/ig,"")},isotop_loop:function(){sv++,console.log(si+' = '+sv),j(social_dataa)},isotop_insert:function(a){jQuery('.social-feed-container_'+c.stream_id).isotope({transformsEnabled:!1,isResizeBound:!1,transitionDuration:0}).isotope('insert',jQuery(a))}};function g(f,a){var g,h;this.content=a,this.content.social_network=f=='vimeo'?'vimeo-square':f,this.content.attachment=this.content.attachment===b?'':this.content.attachment,this.content.time_ago=a.dt_create.locale(svc_ajax_url.laungage).fromNow(),g=this.content.dt_create.locale('en').format("YYYY-MM-DD, hh:mm:ss"),h=new Date(g),this.content.dt_create=h.getTime(),this.content.text=e.wrapLinks(e.shorten(a.message+' '+a.description),a.social_network),this.content.moderation_passed=!c.moderation||c.moderation(this.content),this.content.effect=c.effect,this.content.grid_columns_count_for_desktop=c.grid_columns_count_for_desktop,this.content.grid_columns_count_for_tablet=c.grid_columns_count_for_tablet,this.content.grid_columns_count_for_mobile=c.grid_columns_count_for_mobile,this.content.like=this.content.like,this.content.retwit=this.content.retwit,this.content.like_display=c.hide_like?'yes':'no',d[f].posts.push(this)}g.prototype={render:function(){var b=d.template(this.content),e=this.content,i,j,k,h,m,n,g,l;if(a(f).children('[social-feed-id='+e.id+']').length!==0)return!1;a(f).children().length===0?a('.social-feed-container_'+c.stream_id).html()===''?social_dataa+=b:social_dataa+=b:(i=0,j=-1,a.each(a(f).children(),function(){if(a(this).attr('dt-create')<e.dt_create)return j=i,!1;i++}),social_dataa+=b),c.media_min_width&&(k='[social-feed-id='+e.id+'] img.attachment',h=a(k),n='',g=new Image,l=h.attr("src"),a(g).load(function(){g.width<c.media_min_width,delete g}).error(function(){h.hide()}).attr({src:l}))}},d={template:!1,init:function(){d.getTemplate(function(){i.forEach(function(a){c[a]&&c[a].accounts.forEach(function(b){si++,d[a].getData(b)})}),console.log(si)})},getTemplate:function(b){if(d.template)return b();if(c.template_html)return d.template=doT.template(c.template_html),si=0,b();a.get(c.template,function(a){return d.template=doT.template(a),si=sv=0,b()})},twitter:{posts:[],loaded:!1,api:'http://api.tweecool.com/',getData:function(e){var k,i,g,h,b,j,f,l;switch(a('#social_load_more_btn_'+c.stream_id).attr('data-twitter')=='finish'&&(sv++,k=a('#social_load_more_btn_'+c.stream_id).attr('data-twitter'),k==''&&a('#svc_infinite').hide()),e[0]){case'@':i=e.substr(1),g='',h='',b=a('#social_load_more_btn_'+c.stream_id).attr('data-twitter'),b!=''&&typeof b!='undefined'&&(g='&max_id='+b,c.twitter.limit=parseInt(c.twitter.limit)+1),b!=''&&typeof b!='undefined'&&b!='finish'&&(h='&ajx=y'),b!='finish'&&a.ajax({url:svc_ajax_url.url,data:'action=svc_twit_get_tweet'+h+'&include_retweet='+c.twitter.include_retweet+'&on_cache='+c.on_cache+'&cache_time='+c.cache_time+'&cache_id='+c.cache_id+'&user_name='+i+'&limit='+c.twitter.limit+g,dataType:"json",type:'POST',success:function(a){console.log(a),d.twitter.utility.getPosts(a,'')}});break;case'#':j=e.substr(1),typeof c.twitter.loadmore=='undefined'?(f='action=svc_twit_get_search_tweet&q='+j+'&include_retweet='+c.twitter.include_retweet+'&on_cache='+c.on_cache+'&cache_time='+c.cache_time+'&cache_id='+c.cache_id+'&limit='+c.twitter.limit):(l=c.twitter.loadmore,f='action=svc_twit_get_search_tweet&ajx=y&include_retweet='+c.twitter.include_retweet+'&on_cache='+c.on_cache+'&cache_time='+c.cache_time+'&cache_id='+c.cache_id+'&other=yes&limit='+c.twitter.limit+'&que='+l.replace('?','')),a.ajax({url:svc_ajax_url.url,data:f,dataType:"json",type:'POST',success:function(b){typeof b.search_metadata=="undefined"&&(b.search_metadata="undefined",b.search_metadata.refresh_url="undefined"),typeof b.search_metadata.refresh_url!="undefined"&&b.search_metadata.refresh_url!=="undefined"?a('#social_load_more_btn_'+c.stream_id).attr('data-twitter',b.search_metadata.refresh_url):a('#social_load_more_btn_'+c.stream_id).attr('data-twitter','finish'),d.twitter.utility.getPosts(b.statuses,'search')}});break;default:}},utility:{getPosts:function(b,h){if(b.length==0&&a('#social_load_more_btn_'+c.stream_id).attr('data-twitter','finish'),b){var f=0;a.each(b,function(){var b,e;f++,b=this,h!='search'&&a('#social_load_more_btn_'+c.stream_id).attr('data-twitter',b.id),e=new g('twitter',d.twitter.utility.unifyPostData(b)),e.render()}),b.length==f&&e.isotop_loop()}},unifyPostData:function(b){var d={},f,h,i,g,e;return b.id&&(d.id=b.id_str,d.dt_create=moment(b.created_at,'dd MMM DD HH:mm:ss ZZ YYYY','en'),d.author_link='http://twitter.com/'+b.user.screen_name,location.protocol=='https:'?d.author_picture=b.user.profile_image_url_https:d.author_picture=b.user.profile_image_url,d.post_url=d.author_link+'/status/'+b.id_str,d.author_name=b.user.name,d.message=b.full_text?b.full_text:b.text,d.description='',d.link='http://twitter.com/'+b.user.screen_name+'/status/'+b.id_str,d.like=intToString_counter(b.favorite_count),typeof b.retweet_count=="undefined"?d.retwit=0:d.retwit=intToString_counter(b.retweet_count),f='',typeof b.retweeted_status!="undefined"&&typeof b.retweeted_status.extended_entities!="undefined"&&typeof b.retweeted_status.extended_entities.media!="undefined"?(h=b.retweeted_status.extended_entities.media[0].type,typeof b.retweeted_status.extended_entities.media[0].video_info!="undefined"&&(i=b.retweeted_status.extended_entities.media[0].video_info.variants,g=0,a.each(i,function(){var a=this;a.content_type=="video/mp4"&&g<a.bitrate&&(g=a.bitrate,f=a.url)}))):typeof b.extended_entities!="undefined"&&typeof b.extended_entities.media!="undefined"?(h=b.extended_entities.media[0].type,typeof b.extended_entities.media[0].video_info!="undefined"&&(i=b.extended_entities.media[0].video_info.variants,g=0,a.each(i,function(){var a=this;a.content_type=="video/mp4"&&g<a.bitrate&&(g=a.bitrate,f=a.url)}))):(h='photo'),c.show_media===!0&&(typeof b.retweeted_status!="undefined"&&typeof b.retweeted_status.entities.media!="undefined"&&(location.protocol=='https:'?(e=b.retweeted_status.entities.media[0].media_url_https):(e=b.retweeted_status.entities.media[0].media_url),h=='video'?(f=d.attachment='<span class="svc_twit_video" data-mfp-src="'+svc_ajax_url.url+'?action=svc_inline_twit_video_popup&video_url='+f+'"><img class="svc_attachment" src="'+e+'" /></span>'):e&&(d.attachment='<span class="svc_twit_photo" href="'+e+'"><img class="svc_attachment" src="'+e+'" /></span>')),typeof b.entities.media!="undefined"&&b.entities.media.length>0&&(location.protocol=='https:'?(e=b.entities.media[0].media_url_https):(e=b.entities.media[0].media_url),h=='video'?d.attachment='<span class="svc_twit_video" data-mfp-src="'+svc_ajax_url.url+'?action=svc_inline_twit_video_popup&video_url='+f+'"><img class="svc_attachment" src="'+e+'" /></span>':e&&(d.attachment='<span class="svc_twit_photo" href="'+e+'"><img class="svc_attachment" src="'+e+'" /></span>')))),d.feed="svc_twitter",d}}}},d.init(),c.update_period&&setInterval(function(){return d.init()},c.update_period)}}(jQuery)